!function(a){"use strict";var b,c,d=a();a.fn.sortable=function(e){var f=String(e);return e=a.extend({connectWith:!1,placeholder:null},e),this.each(function(){var g,h,i,j,k,l,m,n,o=a(this);return"reload"===f&&o.children(e.items).off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),/^enable|disable|destroy$/.test(f)?(g=o.children(o.data("items")).attr("draggable","enable"===f),void("destroy"===f&&(o.off("sortupdate"),g.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s").off("sortupdate")))):(h=o.data("opts"),"undefined"==typeof h?o.data("opts",e):e=h,k=o.children(e.items),n=null===e.placeholder?a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">'):a(e.placeholder).addClass("sortable-placeholder"),k.find(e.handle).mousedown(function(){i=!0}).mouseup(function(){i=!1}),o.data("items",e.items),d=d.add(n),e.connectWith&&a(e.connectWith).add(this).data("connectWith",e.connectWith),void k.attr("draggable","true").on("dragstart.h5s",function(d){if(d.stopImmediatePropagation(),e.handle&&!i)return!1;i=!1;var f=d.originalEvent.dataTransfer;f.effectAllowed="move",f.setData("Text","dummy"),j=(b=a(this)).addClass("sortable-dragging").index(),c=b.outerHeight(),l=b.parent()}).on("dragend.h5s",function(){b&&(b.removeClass("sortable-dragging").show(),d.detach(),m=a(this).parent(),(j!==b.index()||l!==m)&&b.parent().triggerHandler("sortupdate",{item:b,oldindex:j,startparent:l,endparent:m}),b=null)}).not("a[href], img").on("selectstart.h5s",function(){return e.handle&&!i?!0:(this.dragDrop&&this.dragDrop(),!1)}).end().add([this,n]).on("dragover.h5s dragenter.h5s drop.h5s",function(f){if(!k.is(b)&&e.connectWith!==b.parent().data("connectWith"))return!0;if("drop"===f.type)return f.stopPropagation(),d.filter(":visible").after(b),b.trigger("dragend.h5s"),!1;f.preventDefault(),f.originalEvent.dataTransfer.dropEffect="move";var g,h,i,j,l,m=a(this);if(k.is(this)){if(g=m.outerHeight(),h=m.index(),i=n.index(),e.forcePlaceholderSize&&n.height(c),g>c){if(j=g-c,l=m.offset().top,h>i&&f.originalEvent.pageY<l+j)return!1;if(i>h&&f.originalEvent.pageY>l+g-j)return!1}b.hide(),m[h>i?"after":"before"](n),d.not(n).detach()}else d.is(this)||m.children(e.items).length||(d.detach(),m.append(n));return!1}))})}}(window.jQuery);