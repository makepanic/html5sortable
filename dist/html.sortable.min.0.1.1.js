"use strict";!function(a){var b,c=a();a.fn.sortable=function(d){var e=String(d);return d=a.extend({connectWith:!1,placeholder:null,dragImage:null,dropModifyDOM:!0,placeholderClassNames:[],indexMethod:function(a){return a.index()}},d),this.each(function(){if("reload"===e&&a(this).children(d.items).off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),/^enable|disable|destroy$/.test(e)){var f=a(this).children(a(this).data("items")).attr("draggable","enable"===e);return void("destroy"===e&&(a(this).off("sortupdate"),f.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s").off("sortupdate")))}var g=a(this).data("opts");"undefined"==typeof g?a(this).data("opts",d):d=g;var h,i,j,k,l=a(this).children(d.items),m=null===d.placeholder?a("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder '+d.placeholderClassNames.join(" ")+'">'):a(d.placeholder).addClass(["sortable-placeholder"].concat(d.placeholderClassNames));l.find(d.handle).mousedown(function(){h=!0}).mouseup(function(){h=!1}),a(this).data("items",d.items),c=c.add(m),d.connectWith&&a(d.connectWith).add(this).data("connectWith",d.connectWith),l.attr("draggable","true").on("dragstart.h5s",function(c){if(c.stopImmediatePropagation(),d.handle&&!h)return!1;h=!1;var e=c.originalEvent.dataTransfer;e.effectAllowed="move",e.setData("Text","dummy"),d.dragImage&&e.setDragImage&&e.setDragImage(d.dragImage,0,0),m.html(a(this).html()),i=d.indexMethod((b=a(this)).addClass("sortable-dragging")),j=a(this).parent()}).on("dragend.h5s",function(e,f){b&&f&&(b.removeClass("sortable-dragging").show(),c.detach(),k=a(this).parent(),(i!==d.indexMethod(b)||j!==k)&&b.parent().triggerHandler("sortupdate",{item:b,oldindex:i,newIndex:f.index,startparent:j,endparent:k}),b=null)}).not("a[href], img").on("selectstart.h5s",function(){return d.handle&&!h?!0:(this.dragDrop&&this.dragDrop(),!1)}).end().add([this,m]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!l.is(b)&&d.connectWith!==a(b).parent().data("connectWith"))return!0;if("drop"===e.type){var f=c.filter(":visible"),g=d.indexMethod(f),h={};return e.stopPropagation(),d.dropModifyDOM?f.after(b):h.index=g,b.trigger("dragend.h5s",h),!1}if(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",l.is(this)){var i=b.outerHeight(),j=a(this).outerHeight();if(d.forcePlaceholderSize&&m.height(i),j>i){var k=j-i,n=a(this).offset().top;if(d.indexMethod(m)<d.indexMethod(a(this))&&e.originalEvent.pageY<n+k)return!1;if(d.indexMethod(m)>d.indexMethod(a(this))&&e.originalEvent.pageY>n+j-k)return!1}b.hide(),a(this)[d.indexMethod(m)<d.indexMethod(a(this))?"after":"before"](m),c.not(m).detach()}else c.is(this)||a(this).children(d.items).length||(c.detach(),a(this).append(m));return!1})})}}($);